[gd_scene load_steps=14 format=3 uid="uid://c406vhblj4cri"]

[ext_resource type="PackedScene" uid="uid://b6v0piwjpskuk" path="res://character/scenes/main_character.tscn" id="1_2lb1q"]
[ext_resource type="PackedScene" uid="uid://bugljten4s6dp" path="res://grid_maps/scene/floor_map.tscn" id="2_x6nks"]
[ext_resource type="PackedScene" uid="uid://dylrseab3yldq" path="res://grid_maps/scene/walls.tscn" id="3_dcs4e"]
[ext_resource type="PackedScene" uid="uid://csleysy0ecbi4" path="res://grid_maps/scene/counters.tscn" id="4_nhi77"]
[ext_resource type="Material" uid="uid://btntdpqkc31xa" path="res://shaders/materials/sky_shader.tres" id="5_n5c0h"]
[ext_resource type="Shader" path="res://shaders/shaders/fog.gdshader" id="6_hgaku"]
[ext_resource type="PackedScene" uid="uid://dnaxn14tjm3d7" path="res://interface/scenes/GUI.tscn" id="7_piwt1"]

[sub_resource type="PlaneMesh" id="PlaneMesh_mmi80"]
size = Vector2(1000, 1000)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_k685h"]
albedo_color = Color(0.117647, 0.117647, 0.117647, 1)

[sub_resource type="NavigationMesh" id="NavigationMesh_rsdli"]
vertices = PackedVector3Array(5.5, 0.592, -29.75, 5.5, 0.592, -33.5, -5.5, 0.592, -33.5, -5.5, 0.592, -29.75, -5.5, 0.592, -29.75, -8, 0.592, -29.5, -7.75, 0.592, -14.5, 0, 0.592, -14.5, 8, 0.592, -29.5, 5.5, 0.592, -29.75, -5.5, 0.592, -29.75, 0, 0.592, -14.5, 7.75, 0.592, -14.5, -8, 0.592, -29.5, -13.5, 0.592, -29.5, -13.75, 0.592, -25.5, -13.75, 0.592, -25.5, -17.5, 0.592, -25.5, -17.5, 0.592, -14.5, -7.75, 0.592, -14.5, -8, 0.592, -29.5, -13.75, 0.592, -25.5, -17.5, 0.592, -14.5, 13.5, 0.592, -25.75, 13.5, 0.592, -29.5, 8, 0.592, -29.5, 17.5, 0.592, -14.5, 17.5, 0.592, -25.5, 13.5, 0.592, -25.75, 7.75, 0.592, -14.5, 17.5, 0.592, -14.5, 13.5, 0.592, -25.75, 8, 0.592, -29.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(9, 8, 10), PackedInt32Array(10, 8, 11), PackedInt32Array(11, 8, 12), PackedInt32Array(15, 14, 13), PackedInt32Array(18, 17, 16), PackedInt32Array(22, 21, 19), PackedInt32Array(19, 21, 20), PackedInt32Array(25, 24, 23), PackedInt32Array(28, 27, 26), PackedInt32Array(32, 31, 29), PackedInt32Array(29, 31, 30)]

[sub_resource type="Sky" id="Sky_3dyt8"]
sky_material = ExtResource("5_n5c0h")

[sub_resource type="Environment" id="Environment_j2woh"]
background_mode = 2
sky = SubResource("Sky_3dyt8")
volumetric_fog_enabled = true
volumetric_fog_density = 0.0092

[sub_resource type="ShaderMaterial" id="ShaderMaterial_bycd2"]
shader = ExtResource("6_hgaku")
shader_parameter/base_density = 1.0
shader_parameter/base_color = null
shader_parameter/fade_out_height = 2.0
shader_parameter/fade_out_distance = 1.5
shader_parameter/noise_amounts = Vector3(0.4, 0.35, 0.25)
shader_parameter/noise_scales = Vector3(1, 2, 4)
shader_parameter/noise_velocity1 = Vector3(0.5, 0, 0)
shader_parameter/noise_velocity2 = Vector3(1, 0, -1)
shader_parameter/noise_velocity3 = Vector3(0, 0.6, 0.3)

[node name="Gamelevel" type="Node3D"]

[node name="CharacterBody3D" parent="." instance=ExtResource("1_2lb1q")]

[node name="road" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.3, 0)
mesh = SubResource("PlaneMesh_mmi80")
surface_material_override/0 = SubResource("StandardMaterial3D_k685h")

[node name="levels" type="Node3D" parent="."]

[node name="floorgridmap" parent="levels" instance=ExtResource("2_x6nks")]
data = {
"cells": PackedInt32Array(0, 0, 0, 65532, 0, 0, 65528, 0, 0, 4, 0, 0, 8, 0, 0, 0, 65532, 0, 0, 65528, 0, 0, 65524, 0, 0, 4, 0, 0, 8, 0, 0, 12, 0, 12, 0, 0, 65524, 0, 0, 65532, 65532, 0, 65528, 65532, 0, 65524, 65532, 0, 65524, 65528, 0, 65524, 65524, 0, 65528, 65524, 0, 65532, 65524, 0, 65532, 65528, 0, 65528, 65528, 0, 4, 65532, 0, 4, 65528, 0, 8, 65532, 0, 4, 65524, 0, 12, 65532, 0, 12, 65528, 0, 12, 65524, 0, 8, 65524, 0, 8, 65528, 0, 4, 4, 0, 8, 4, 0, 12, 4, 0, 12, 8, 0, 12, 12, 0, 8, 12, 0, 4, 12, 0, 4, 8, 0, 8, 8, 0, 65532, 12, 0, 65528, 12, 0, 65524, 4, 0, 65524, 8, 0, 65524, 12, 0, 65528, 8, 0, 65532, 8, 0, 65532, 4, 0, 65528, 4, 0, 0, 16, 655360, 4, 16, 655360, 8, 16, 655360, 12, 16, 655360, 65532, 16, 655360, 65528, 16, 655360, 65524, 16, 655360, 0, 20, 655360, 65532, 20, 655360, 4, 20, 655360, 8, 20, 655360, 8, 24, 655360, 65528, 20, 655360, 65528, 24, 655360, 65532, 24, 655360, 0, 24, 655360, 4, 24, 655360, 65524, 20, 655360, 12, 20, 655360, 65534, 28, 655360, 2, 28, 655360, 65534, 32, 655360, 2, 32, 655360)
}

[node name="GridMap2" parent="levels" instance=ExtResource("4_nhi77")]

[node name="walls_1" type="Node3D" parent="levels"]

[node name="left" parent="levels/walls_1" instance=ExtResource("3_dcs4e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, -0.9, -0.5)
data = {
"cells": PackedInt32Array(65524, 12, 1048577, 65524, 8, 1048577, 65524, 4, 1048577, 65524, 0, 1048577, 65524, 65532, 1048577, 65524, 65528, 1048577, 65524, 65524, 1048577, 65522, 16, 1048578, 65522, 20, 1048578, 65526, 24, 1048578, 65532, 28, 1048578, 65532, 32, 1048578, 65520, 65520, 1048582, 65520, 65516, 1048582, 65520, 65512, 1048582, 65524, 65508, 1048582, 65532, 65504, 1048582)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="right" parent="levels/walls_1" instance=ExtResource("3_dcs4e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, -0.9, -0.5)
data = {
"cells": PackedInt32Array(12, 65524, 1441793, 12, 65528, 1441793, 12, 65532, 1441793, 12, 0, 1441793, 12, 4, 1441793, 12, 8, 1441793, 12, 12, 1441793, 4, 28, 1048578, 4, 32, 1048578, 14, 16, 1441794, 14, 20, 1441794, 10, 24, 1441794, 16, 65520, 1441798, 16, 65516, 1441798, 16, 65512, 1441798, 12, 65508, 1441798, 4, 65504, 1441798)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="foward" parent="levels/walls_1" instance=ExtResource("3_dcs4e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 1, -0.5)
data = {
"cells": PackedInt32Array(-65548, 65524, 1, -65544, 65524, 1, -131060, 65524, 1, -131064, 65524, 1, -131056, 65520, 655366, -65552, 65520, 655366)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="backward" parent="levels/walls_1" instance=ExtResource("3_dcs4e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, -0.9, -0.5)
data = {
"cells": PackedInt32Array(12, 12, 655361, 8, 12, 655361, 65524, 12, 655361, 65528, 12, 655361, 65524, 22, 2, 196598, 26, 589826, 12, 22, 2, 16, 65512, 6, 12, 65508, 6, 8, 65508, 6, 65524, 65508, 6, 65528, 65508, 6, 65520, 65512, 6, 65532, 65504, 6, 4, 65504, 6, 131082, 26, 65538)
}
metadata/_editor_floor_ = Vector3(0, 2, 0)

[node name="walls_2" type="Node3D" parent="levels"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, 0)

[node name="left" parent="levels/walls_2" instance=ExtResource("3_dcs4e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, -0.9, -0.5)
data = {
"cells": PackedInt32Array(65524, 12, 1048577, 65524, 8, 1048577, 65524, 4, 1048577, 65524, 0, 1048577, 65524, 65532, 1048577, 65524, 65528, 1048577, 65524, 65524, 1048577, 65520, 65520, 1048582, 65520, 65516, 1048582, 65520, 65512, 1048582, 65524, 65508, 1048582, 65532, 65504, 1048582)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="right" parent="levels/walls_2" instance=ExtResource("3_dcs4e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, -0.9, -0.5)
data = {
"cells": PackedInt32Array(12, 65524, 1441793, 12, 65528, 1441793, 12, 65532, 1441793, 12, 0, 1441793, 12, 4, 1441793, 12, 8, 1441793, 12, 12, 1441793, 16, 65520, 1441798, 16, 65516, 1441798, 16, 65512, 1441798, 12, 65508, 1441798, 4, 65504, 1441798)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="foward" parent="levels/walls_2" instance=ExtResource("3_dcs4e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 1, -0.5)
data = {
"cells": PackedInt32Array(-65548, 65524, 1, -65544, 65524, 1, -131060, 65524, 1, -131064, 65524, 1, -131056, 65520, 655366, -65552, 65520, 655366, -65540, 65524, 1, -131072, 65524, 1, -131068, 65524, 1)
}
metadata/_editor_floor_ = Vector3(0, -2, 0)

[node name="backward" parent="levels/walls_2" instance=ExtResource("3_dcs4e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, -0.9, -0.5)
data = {
"cells": PackedInt32Array(12, 12, 655361, 8, 12, 655361, 65524, 12, 655361, 65528, 12, 655361, 16, 65512, 6, 12, 65508, 6, 8, 65508, 6, 65524, 65508, 6, 65528, 65508, 6, 65520, 65512, 6, 65532, 65504, 6, 4, 65504, 6, 0, 65504, 6)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="topwalls" parent="levels" instance=ExtResource("3_dcs4e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 11, -0.5)
data = {
"cells": PackedInt32Array(12, 8, 393220, 8, 8, 393220, 4, 8, 393220, 0, 8, 393220, 12, 3, 393220, 8, 3, 393220, 4, 3, 393220, 12, 65534, 393220, 8, 65534, 393220, 4, 65534, 393220, 0, 3, 393220, 65532, 8, 393220, 65528, 8, 393220, 65524, 8, 393220, 65524, 3, 393220, 65528, 3, 393220, 65532, 3, 393220, 0, 65534, 393220, 65532, 65534, 393220, 65528, 65534, 393220, 65524, 65534, 393220, 12, 65531, 393220, 8, 65531, 393220, 5, 65531, 393220, 1, 65531, 393220, 65533, 65531, 393220, 65529, 65531, 393220, 65524, 65531, 393220, 65526, 65531, 393220, 65524, 65526, 393220, 65524, 65522, 393220, 65528, 65526, 393220, 65532, 65526, 393220, 0, 65526, 393220, 4, 65526, 393220, 8, 65526, 393220, 12, 65526, 393220, 65528, 65522, 393220, 65532, 65522, 393220, 0, 65522, 393220, 4, 65522, 393220, 8, 65522, 393220, 12, 65522, 393220, 65520, 65510, 393220, 65524, 65510, 393220, 65524, 65506, 393220, 65528, 65510, 393220, 65528, 65506, 393220, 65532, 65510, 393220, 0, 65510, 393220, 4, 65510, 393220, 8, 65510, 393220, 65532, 65506, 393220, 0, 65506, 393220, 4, 65506, 393220, 12, 65510, 393220, 16, 65510, 393220, 12, 65506, 393220, 8, 65506, 393220, 4, 65502, 393220, 65532, 65502, 393220, 0, 65502, 393220, 65520, 65517, 393220, 65524, 65517, 393220, 65528, 65517, 393220, 65532, 65517, 393220, 0, 65517, 393220, 4, 65517, 393220, 8, 65517, 393220, 12, 65517, 393220, 16, 65517, 393220, 16, 65513, 393220, 12, 65513, 393220, 8, 65513, 393220, 4, 65513, 393220, 0, 65513, 393220, 65532, 65513, 393220, 65528, 65513, 393220, 65524, 65513, 393220, 65520, 65513, 393220)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_rsdli")
enabled = false

[node name="GridMap" parent="NavigationRegion3D" instance=ExtResource("2_x6nks")]
data = {
"cells": PackedInt32Array(0, 65520, 3, 65532, 65520, 3, 65528, 65520, 3, 65524, 65520, 3, 4, 65520, 3, 8, 65520, 3, 12, 65520, 3, 65524, 65516, 3, 65528, 65516, 3, 65532, 65516, 3, 0, 65516, 3, 4, 65516, 3, 8, 65516, 3, 12, 65516, 3, 12, 65512, 3, 8, 65512, 3, 4, 65512, 3, 0, 65512, 3, 65532, 65512, 3, 65528, 65512, 3, 65524, 65512, 3, 65520, 65520, 3, 65520, 65516, 3, 65520, 65512, 3, 16, 65520, 3, 16, 65516, 3, 16, 65512, 3, 65524, 65508, 3, 65528, 65508, 3, 65532, 65508, 3, 0, 65508, 3, 4, 65508, 3, 8, 65508, 3, 12, 65508, 3, 0, 65504, 3, 65532, 65504, 3, 4, 65504, 3)
}

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.5, 0.866025, 0, -0.866025, -0.5, 0, 4, 0)
shadow_enabled = true
shadow_blur = 0.5

[node name="WorldEnvironment" type="WorldEnvironment" parent="." groups=["environment"]]
environment = SubResource("Environment_j2woh")

[node name="FogVolume" type="FogVolume" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 82.5)
size = Vector3(160, 0.5, 160)
material = SubResource("ShaderMaterial_bycd2")

[node name="FogVolume2" type="FogVolume" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -115)
size = Vector3(160, 0.5, 160)
material = SubResource("ShaderMaterial_bycd2")

[node name="CanvasLayer" parent="." instance=ExtResource("7_piwt1")]
